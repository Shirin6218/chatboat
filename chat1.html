<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cute Chat Bubble UI</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: linear-gradient(135deg, #880650, #ee9dca);
      font-family: 'Comic Sans MS', 'Poppins', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;

    }

    .chat-container {
      width: 390px;
      height: 600px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px 20px 29px 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .message {
      text-align: end;

    }

    .message1 {
      text-align: start;
    }

    .chat-header {
      background: #80004d;
      color: #fff;
      font-size: 24px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      padding: 15px;
      text-align: center;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }


    .chat-body {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
      background: #f0dfed;
    }

    .message {
      max-width: 75%;
      padding: 12px 19px;
      font-size: 14px;
      position: relative;
      line-height: 1.4;
    }

    .bot-message {
      background: linear-gradient(135deg, #b93181, #657279);
      border-radius: 20px 20px 29px 0;
      align-self: flex-start;
      color: rgb(240, 230, 230);
      font-size: 16px;
    }

    .user-message {
      background: linear-gradient(135deg, #b93181, #657279);
      color: #f0eded;
      border-radius: 20px 20px 0 20px;
      align-self: flex-end;

    }

    .chat-input {
      display: flex;
      padding: 12px;
      border-top: 1px solid #f197e5;
      background: linear-gradient(135deg, #b93181, #334d5c);
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border-radius: 20px;
      border: 1px solid #1c1c20;
      outline: none;
      font-size: 14px;
      background: #f2f2fc;
    }

    .chat-input button {
      margin-left: 8px;
      background: linear-gradient(135deg, #996181, #8b3665);
      border: none;
      padding: 0 20px;
      border-radius: 20px;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    .chat-input button:hover {
      background: #53072d;
    }

    .sen {
      font-family: Tahoma, sans-serif;
    }

    .img {
      height: 40px;
      width: 20%;
    }

    .tim {
      font-size: 10px;
      color: #1f1b1e;
      align-self: flex-end;
    }

    .tim2 {
      font-size: 10px;
      color: #1f1b1e;
      align-self: flex-start;
    }

    .dt {
      font-size: 10px;
      color: #1f1b1e;
    }

    .dt2 {
      font-size: 10px;
      color: #1f1b1e;
    }

    .audio {
      display: none;

    }
  </style>
</head>

<body>
  <div class="chat-container">

    <div class="chat-header">Chatty &#129321 <br>
      <span id="count" style="font-size:12px;"></span>
    </div>
    <!-- <div class="message bot-message">Hyy hiiii</div> -->
    <div class="chat-body  chat-messages user-chat" id="chat">
    </div>
    <div class="chat-input">
      <input type="text" id="user-chat" placeholder="type message....." />
      <button onclick="sendMessage()" class="sen" id="btn">Send</button>
    </div>
  </div>
  <audio src="C:\Users\Lenovo\Downloads\notify-8-313753.mp3" controls id="music" class="audio"></audio>

  <script>
   var newarray = []
    let count = 0;
    let checklist = false;
    let todolist = []
    let messages = [];
    let list = "<ol>";
    // let dob="";
    function sendMessage() {
      evaluateExpression();
      count += 2;
      var time = new Date();
      var datetime = time.toLocaleString([], {
        hour: "2-digit",
        minute: "2-digit",
        hour12: true
      });
      const date = time.toLocaleString('en-US', {
        weekday: "long",   // 
        day: "2-digit",
        month: "2-digit",
        year: "2-digit"
      })
      let input = document.getElementById("user-chat").value;
      evaluateExpression(input)
      let data = {
        message: input,
        type: "send",

        // time : 12.25,
      };
      messages.push(data);
      userText = input.toLowerCase();

      // var days = new Date(input)
      // var year = days.getFullYear();

      // var today = new Date()
      // var years = today.getFullYear()

      // var totalyears = years - year;
      // console.log(totalyears)

      messages.pop();
      let rpy = "";
      try {
        input = document.getElementById("user-chat").value;
        const result = eval(input);
        if(userText [2] == "-"  &&  userText [5] == "-"){
       var empty = "";
         let getdate=  userText[0] + userText [1]
         let getmonth= userText [3] +userText[4]
        let getyear=  userText [6] + userText [7] + userText [8] + userText [9]
          empty = getyear + "-"+ getmonth + "-" +getdate
      var today = new Date()
      var years = today.getFullYear()-getyear;
      var month = today.getMonth()-getmonth+1;
      var days = today.getDate()-getdate;
     console.log(years + ","+ month + ","+ days)
    
          rpy= years + "y-"+ month + "m-"+ days + "d";
        }
        else if (result) {
          rpy = ` ${result}`;
        }
      }
      catch {

        if (!checklist) {
          if (userText == "hii") {
            rpy = "hello! &#9995 how are you&#128522";
          }
          else if (userText == "i am good" || userText == "how was it") {
            rpy = "your name &#128512";
          }
          else if (userText == "shaik shirin" || userText == "your name ") {
            rpy = "&#128521 nice name! how old are you ";
          }
          else if (userText == "years 20") {
            rpy = "do you have any siblings"
          }
          else if (userText == "ha ofcourse") {
            rpy = "&#128519 oo nice"
          }
          else if (userText == "tnqs" || userText == "") {
            rpy = "&#128519 your favorite hobies";
          }
          else if (userText == "what is time now") {
            rpy = datetime
          }
          else if (userText == "what is today") {
            rpy = date
          }
          else if (userText == "generate random num") {
            rpy = Math.floor(Math.random() * 100);
          }
          else if (userText == "listenig songs") {
            rpy = "favroite food!&#128518";
          }
         
          else if (userText == "biryani") {
            rpy = "wich clor do you like &#128519";
          }
          else if (userText == "todo list") {
            checklist = true;
            rpy = "remeber list ";
          }
          // else if(userText [2] == "-"  &&  userText [5] == "-"){
          //   rpy = totalyears
          // }
          else if (userText == "show me mylist") {
            todolist.forEach(element => {
              list += "<li>" + element + "</li>"
              console.log(element);
            });
            list += "</ol>";
            rpy = list;
          }
          else if (userText == "pink") {
            rpy = " &#128522 do you have pet"
          }

          else if (userText == "yes i have") {
            rpy = "which pet"
          }

          else if (userText == "cat") {
            rpy = "ooh &#128512"

          }
          else {
            rpy = "sorry i can't understand"
          }
        }

        else {
          if (userText == "stop remember") {
            rpy = "ok";
            checklist = false;
          } else {
            todolist.push(userText);
            rpy = "i remember";
          }
        }
      }
      console.log(rpy)
      let data2 = {
        messages: rpy,
        type: "recieve",
        // time: 12.27,
      };
      messages.push(data)
      messages.push(data2);
      console.log(messages);
      // function updateChat(){
      var chats = '';
      for (i = 0; i < messages.length; i++) {
        if (messages[i].type == "send") {
          chats += '<div class=\"message user-message\">' + messages[i].message + '<br>' + '<span class = \"tim"\>' + datetime + '</div>' + '<span class=\"tim\">' + date + '</span>';

        }
        else if (messages[i].type == "recieve") {
          chats += '<div class=\"message bot-message\ ">' + messages[i].messages + '<br>' + '<span class = \"tim"\>' + datetime + '</div>' + '<span class=\"tim2\">' + date + '</span>';
        }

      };
      console.log(input.value);
      i = "hjdksfd"
      document.getElementById('chat').innerHTML = chats;
      document.getElementById('count').innerHTML = count;
      document.getElementById('user-chat').value = '';
      document.getElementById("music").play();

      var hyy = document.getElementById("user-chat");
      hyy.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          document.getElementById("btn").click();
        }
      });
      function evaluateExpression(messages) {
        try {
          const result = eval(messages);
          if (/^[0-9+\-*/%().\s]+$/.test(messages)) {
            const result = eval(messages);
            return `Result: ${result}`;
          } else {
            return "Invalid input. Please enter a valid math expression.";
          }
          return "result"
        } catch (error) {
          return "Error in evaluating expression.";
        }
      }
    }
  </script>
</body>

</html>