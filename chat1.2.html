<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cute Chat Bubble UI</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: linear-gradient(135deg, #880650, #ee9dca);
      font-family: 'Comic Sans MS', 'Poppins', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .chat-container {
      width: 390px;
      height: 600px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px 20px 29px 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .message {
      text-align: end;
    }

    .message1 {
      text-align: start;
    }

    .chat-header {
      background: #80004d;
      color: #fff;
      font-size: 24px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      padding: 15px;
      text-align: center;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }

    .chat-body {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
      background: #f0dfed;
    }

    .message {
      max-width: 75%;
      padding: 12px 19px;
      font-size: 14px;
      position: relative;
      line-height: 1.4;
    }

    .bot-message {
      background: linear-gradient(135deg, #b93181, #657279);
      border-radius: 20px 20px 29px 0;
      align-self: flex-start;
      color: rgb(240, 230, 230);
      font-size: 16px;
    }

    .user-message {
      background: linear-gradient(135deg, #b93181, #657279);
      color: #f0eded;
      border-radius: 20px 20px 0 20px;
      align-self: flex-end;
    }

    .chat-input {
      display: flex;
      padding: 12px;
      border-top: 1px solid #f197e5;
      background: linear-gradient(135deg, #b93181, #334d5c);
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border-radius: 20px;
      border: 1px solid #1c1c20;
      outline: none;
      font-size: 14px;
      background: #f2f2fc;
    }

    .chat-input button {
      margin-left: 8px;
      background: linear-gradient(135deg, #996181, #8b3665);
      border: none;
      padding: 0 20px;
      border-radius: 20px;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    .chat-input button:hover {
      background: #53072d;
    }

    .tim {
      font-size: 10px;
      color: #1f1b1e;
      align-self: flex-end;
    }

    .tim2 {
      font-size: 10px;
      color: #1f1b1e;
      align-self: flex-start;
    }

    .audio {
      display: none;
    }

    .typing .dots::after {
      content: '';
      animation: dots 1s steps(3, end) infinite;
    }

    @keyframes dots {
      0%,
      20% {
        content: '';
      }

      40% {
        content: '.';
      }

      60% {
        content: '..';
      }

      80%,
      100% {
        content: '...';
      }
    }
  </style>
</head>

<body>
  <div class="chat-container">
    <div class="chat-header">Chatty &#129321 <br>
      <span id="count" style="font-size:12px;"></span>
    </div>
    <div class="chat-body" id="chat"></div>
    <div class="chat-input">
      <input type="text" id="user-chat" placeholder="type message....." />
      <button onclick="sendMessage()" id="btn">Send</button>
    </div>
  </div>
  <audio src="C:\Users\Lenovo\Downloads\notify-8-313753.mp3" controls id="music" class="audio"></audio>

  <script>
    let count = 0;
    let checklist = false;
    let todolist = [];
    let messages = [];

    function sendMessage() {
      count += 2;
      const time = new Date();
      const datetime = time.toLocaleString([], {
        hour: "2-digit",
        minute: "2-digit",
        hour12: true,
      });
      const date = time.toLocaleString("en-US", {
        weekday: "long",
        day: "2-digit",
        month: "2-digit",
        year: "2-digit",
      });

      let input = document.getElementById("user-chat").value;
      let userText = input.toLowerCase();
      let rpy = "";

      messages.push({ message: input, type: "send" });
      messages.push({ message: "<span class='typing-dots'></span>", type: "typing", time: datetime, date: date });
      updateChat();

      setTimeout(() => {
        messages.pop(); // Remove the typing indicator
        try {
          const result = eval(input); // Evaluate if it's a valid math expression
          if (result) {
            rpy = `${result}`;
          }
        } catch {
          if (!checklist) {
            rpy = handleBotResponse(userText, datetime, date);
          } else {
            rpy = handleToDoList(userText);
          }
        }

        messages.push({ messages: rpy, type: "recieve", time: datetime, date: date });
        updateChat();

        document.getElementById("user-chat").value = "";
        document.getElementById("music").play();
      }, 1000);
    }

    function handleBotResponse(userText, datetime, date) {
      let rpy = "";
      switch (userText) {
        case "hii":
          rpy = "hello! &#9995 how are you&#128522";
          break;
        case "i am good":
        case "how was it":
          rpy = "your name &#128512";
          break;
        case "shaik shirin":
          rpy = "&#128521 nice name! how old are you ";
          break;
        case "years 20":
          rpy = "do you have any siblings";
          break;
        case "what is time now":
          rpy = datetime;
          break;
        case "what is today":
          rpy = date;
          break;
        default:
          rpy = "sorry i can't understand";
          break;
      }
      return rpy;
    }

    function handleToDoList(userText) {
      let rpy = "";
      if (userText === "stop remember") {
        rpy = "ok";
        checklist = false;
      } else {
        todolist.push(userText);
        rpy = "i remember";
      }
      return rpy;
    }

    function updateChat() {
      let chats = "";
      messages.forEach((msg) => {
        if (msg.type === "send") {
          chats += `<div class="message user-message">${msg.message}<br><span class="tim">${msg.time}</span><span class="tim2">${msg.date}</span></div>`;
        } else if (msg.type === "recieve") {
          chats += `<div class="message bot-message">${msg.messages}<br><span class="tim">${msg.time}</span><span class="tim2">${msg.date}</span></div>`;
        } else if (msg.type === "typing") {
          chats += `<div class="message bot-message">${msg.message}</div>`;
        }
      });

      document.getElementById("chat").innerHTML = chats;
    }

    document.getElementById("user-chat").addEventListener("keypress", function (event) {
      if (event.key === "Enter") {
        sendMessage();
      }
    });
  </script>
</body>

</html>
